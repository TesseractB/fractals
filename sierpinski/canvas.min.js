var canvas=$("#canvas")[0],ctx=canvas.getContext("2d"),mode="prod";function drawPoint(b,a){a||(a=1),ctx.fillRect(b[0],b[1],a,a)}drawPoint([350,0]),drawPoint([0,699]),drawPoint([700,699]),"dev"===mode&&(ctx.moveTo(350,0),ctx.lineTo(0,699),ctx.lineTo(700,699),ctx.lineTo(350,0),ctx.stroke());var originals=[[350,0],[0,699],[700,699]];function randomPoint(){return[Math.floor(700*Math.random()),Math.floor(700*Math.random())]}function isPointInTriangle(j,c){var k=j[0],l=j[1],d=c[0][0],e=c[0][1],f=c[1][0],g=c[1][1],a=c[2][0],b=c[2][1],h=((g-b)*(k-a)+(a-f)*(l-b))/((g-b)*(d-a)+(a-f)*(e-b)),i=((b-e)*(k-a)+(d-a)*(l-b))/((g-b)*(d-a)+(a-f)*(e-b)),m=1-h-i;return h>=0&&h<=1&&i>=0&&i<=1&&m>=0&&m<=1}function getRandomPointInTriangle(b){for(var a=randomPoint();!isPointInTriangle(a,b);)a=randomPoint();return a}function getMidpoint(a,b){var c=(a[0]+b[0])/2,d=(a[1]+b[1])/2;return[c,d]}var currentPosition=getRandomPointInTriangle(originals);drawPoint(currentPosition),setInterval(function(){var a=getMidpoint(currentPosition,originals[Math.floor(3*Math.random())]);drawPoint(a),currentPosition=a},1)
